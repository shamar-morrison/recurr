[debug] [2025-12-30T01:47:23.945Z] ----------------------------------------------------------------------
[debug] [2025-12-30T01:47:23.946Z] Command:       /Users/edufocal/.nvm/versions/node/v24.0.2/bin/node /Users/edufocal/.nvm/versions/node/v24.0.2/bin/firebase deploy --only functions --debug
[debug] [2025-12-30T01:47:23.947Z] CLI Version:   15.1.0
[debug] [2025-12-30T01:47:23.947Z] Platform:      darwin
[debug] [2025-12-30T01:47:23.947Z] Node Version:  v24.0.2
[debug] [2025-12-30T01:47:23.947Z] Time:          Mon Dec 29 2025 20:47:23 GMT-0500 (Eastern Standard Time)
[debug] [2025-12-30T01:47:23.947Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-12-30T01:47:24.673Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-12-30T01:47:24.674Z] > authorizing via signed-in user (shamar.morrison2000@gmail.com)
[debug] [2025-12-30T01:47:24.674Z] [iam] checking project recurr-app for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-12-30T01:47:24.675Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:24.675Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:24.675Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/recurr-app:testIamPermissions [none]
[debug] [2025-12-30T01:47:24.675Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/recurr-app:testIamPermissions x-goog-quota-user=projects/recurr-app
[debug] [2025-12-30T01:47:24.675Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/recurr-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-12-30T01:47:24.972Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/recurr-app:testIamPermissions 200
[debug] [2025-12-30T01:47:24.973Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/recurr-app:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-12-30T01:47:24.974Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:24.974Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:24.974Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/recurr-app/serviceAccounts/recurr-app@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-12-30T01:47:24.974Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/recurr-app/serviceAccounts/recurr-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-12-30T01:47:25.283Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/recurr-app/serviceAccounts/recurr-app@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-12-30T01:47:25.284Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/recurr-app/serviceAccounts/recurr-app@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'recurr-app'...
[info] 
[info] i  deploying functions 
[debug] [2025-12-30T01:47:25.287Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:25.287Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:25.287Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/recurr-app [none]
[debug] [2025-12-30T01:47:25.413Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/recurr-app 200
[debug] [2025-12-30T01:47:25.413Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/recurr-app {"projectNumber":"845079285876","projectId":"recurr-app","lifecycleState":"ACTIVE","name":"recurr-app","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-12-27T04:26:58.152857Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-12-30T01:47:25.416Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:25.416Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:25.416Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/recurr-app/adminSdkConfig [none]
[debug] [2025-12-30T01:47:25.906Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/recurr-app/adminSdkConfig 200
[debug] [2025-12-30T01:47:25.907Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/recurr-app/adminSdkConfig {"projectId":"recurr-app","storageBucket":"recurr-app.firebasestorage.app"}
[debug] [2025-12-30T01:47:25.907Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:25.907Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:25.907Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs [none]
[debug] [2025-12-30T01:47:26.298Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs 200
[debug] [2025-12-30T01:47:26.298Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs {"configs":[{"name":"projects/recurr-app/configs/google"}]}
[debug] [2025-12-30T01:47:26.299Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.299Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.299Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables [none]
[debug] [2025-12-30T01:47:26.453Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables 200
[debug] [2025-12-30T01:47:26.454Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables {"variables":[{"name":"projects/recurr-app/configs/google/variables/service_account/auth_uri","updateTime":"2025-12-30T01:45:58.714340494Z"},{"name":"projects/recurr-app/configs/google/variables/service_account/client_x509_cert_url","updateTime":"2025-12-30T01:45:59.645770237Z"},{"name":"projects/recurr-app/configs/google/variables/service_account/private_key_id","updateTime":"2025-12-30T01:45:58.594635249Z"},{"name":"projects/recurr-app/configs/google/variables/service_account/universe_domain","updateTime":"2025-12-30T01:46:01.778553537Z"},{"name":"projects/recurr-app/configs/google/variables/service_account/project_id","updateTime":"2025-12-30T01:45:55.832185696Z"},{"name":"projects/recurr-app/configs/google/variables/service_account/private_key","updateTime":"2025-12-30T01:45:58.668012026Z"},{"name":"projects/recurr-app/configs/google/variables/service_account/token_uri","updateTime":"2025-12-30T01:45:58.563062680Z"},{"name":"projects/recurr-app/configs/google/variables/service_account/client_id","updateTime":"2025-12-30T01:45:58.630700779Z"},{"name":"projects/recurr-app/configs/google/variables/service_account/client_email","updateTime":"2025-12-30T01:45:58.294705011Z"},{"name":"projects/recurr-app/configs/google/variables/service_account/type","updateTime":"2025-12-30T01:46:00.509027188Z"},{"name":"projects/recurr-app/configs/google/variables/service_account/auth_provider_x509_cert_url","updateTime":"2025-12-30T01:45:58.308331864Z"}]}
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:26.454Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/auth_uri [none]
[debug] [2025-12-30T01:47:26.455Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/client_x509_cert_url [none]
[debug] [2025-12-30T01:47:26.457Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/private_key_id [none]
[debug] [2025-12-30T01:47:26.459Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/universe_domain [none]
[debug] [2025-12-30T01:47:26.460Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/project_id [none]
[debug] [2025-12-30T01:47:26.461Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/private_key [none]
[debug] [2025-12-30T01:47:26.463Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/token_uri [none]
[debug] [2025-12-30T01:47:26.466Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/client_id [none]
[debug] [2025-12-30T01:47:26.467Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/client_email [none]
[debug] [2025-12-30T01:47:26.468Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/type [none]
[debug] [2025-12-30T01:47:26.469Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/auth_provider_x509_cert_url [none]
[debug] [2025-12-30T01:47:26.617Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/auth_uri 200
[debug] [2025-12-30T01:47:26.618Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/auth_uri {"name":"projects/recurr-app/configs/google/variables/service_account/auth_uri","updateTime":"2025-12-30T01:45:58.714340494Z","text":"https://accounts.google.com/o/oauth2/auth"}
[debug] [2025-12-30T01:47:26.724Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/client_x509_cert_url 200
[debug] [2025-12-30T01:47:26.724Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/client_x509_cert_url {"name":"projects/recurr-app/configs/google/variables/service_account/client_x509_cert_url","updateTime":"2025-12-30T01:45:59.645770237Z","text":"https://www.googleapis.com/robot/v1/metadata/x509/validate-premium-purchase%40recurr-482721.iam.gserviceaccount.com"}
[debug] [2025-12-30T01:47:26.733Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/universe_domain 200
[debug] [2025-12-30T01:47:26.734Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/universe_domain {"name":"projects/recurr-app/configs/google/variables/service_account/universe_domain","updateTime":"2025-12-30T01:46:01.778553537Z","text":"googleapis.com"}
[debug] [2025-12-30T01:47:26.735Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/client_id 200
[debug] [2025-12-30T01:47:26.735Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/client_id {"name":"projects/recurr-app/configs/google/variables/service_account/client_id","updateTime":"2025-12-30T01:45:58.630700779Z","text":"114424493371151366606"}
[debug] [2025-12-30T01:47:26.738Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/client_email 200
[debug] [2025-12-30T01:47:26.738Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/client_email {"name":"projects/recurr-app/configs/google/variables/service_account/client_email","updateTime":"2025-12-30T01:45:58.294705011Z","text":"validate-premium-purchase@recurr-482721.iam.gserviceaccount.com"}
[debug] [2025-12-30T01:47:26.739Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/type 200
[debug] [2025-12-30T01:47:26.739Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/type {"name":"projects/recurr-app/configs/google/variables/service_account/type","updateTime":"2025-12-30T01:46:00.509027188Z","text":"service_account"}
[debug] [2025-12-30T01:47:26.796Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/auth_provider_x509_cert_url 200
[debug] [2025-12-30T01:47:26.796Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/auth_provider_x509_cert_url {"name":"projects/recurr-app/configs/google/variables/service_account/auth_provider_x509_cert_url","updateTime":"2025-12-30T01:45:58.308331864Z","text":"https://www.googleapis.com/oauth2/v1/certs"}
[debug] [2025-12-30T01:47:26.812Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/private_key 200
[debug] [2025-12-30T01:47:26.812Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/private_key {"name":"projects/recurr-app/configs/google/variables/service_account/private_key","updateTime":"2025-12-30T01:45:58.668012026Z","text":"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCniw1WLN6e/cdW\nInQ6O0nAcx4THKwUqeoKRCsgrLRUSMVNjocEePib4liRjf7gMgcyS++tGWzxNjJh\nfowlhZrBJ0Kq53ZN+7OEQzWl+1rpcAuwbZr6sWERRWsPqGnilkxencndEzn6AFcn\njSsu/IIxSlaAAbLIlZxASTQutdFIiO97jhJi6Fw9elqBZMDgCUx8A211zdCG/HMQ\nRcSF0HvhSqzaSFP5gObbuDY7GH6qEWa16vT3qL6Sy9C9fQ1N7faOiaINUAbCHpAT\nN7vVhKQteQyq0KjGhQ4ixVcTRrH+Nr9lG9EJYL05kF1RTE9z7Iomhi0A5qht1G0J\nzCRN6MgVAgMBAAECggEACIzTlui+Sa3YzOAAP3KEHoKhb8dATuOm8nQtIUM/Bqga\nDY2u/T7xLP9dlrwA3E8hR+NRLWvFQAAMjSYon8eUMLRAtjkOtAcaz66gX8KWjqAt\nsIi/ZnjD494/ivKEyM/zwMZbpWEUTdpTmEyffgvb1wkcpfawOYVNDojN1W5o6kMh\nlinlOpY8kuKlOqAUJWZYP0Phcu3+6Iv7vFd0CzgfZqpWCi0zAQxxC5QGlLz1QEmH\ndfCQYLUj2ogFg+z6DFlAVQuY6YrdGmPpp9/+w1wPjgwyZEM9AeeN0sOKE6A/NB8l\n2pFwQCCn4/mx0zZk4xw8Zb+aJ2ayRaYWC81Kl1gqQQKBgQDQNyGODYIrtsqLWOSf\n/4WB+1IMq5Qs2aARnRrFK0rIsK20umFZnrqOqdZY/iJj5pDGh+8TUyaJFMeMaIMO\ngpGa6IKPk10qXRFpJCKtUARis/nyBX2bjFPNViakQvWxz3fCrnkDg5D9ekNcrrR5\nnQHYEXTrngjXd+n3FpOI11yz9QKBgQDN/mNNOTvZQdGrxju3SWsh+82uzWfsH1ew\nm/1PSkhDuGvtaFUcPpKYB9q7xLVZeO1zojakgHSKjqyowtr/RFpuOdazKz2iAsSp\nay+lIdEECkJo4F4rB7ULMchjgH611KCZ6trFItkMNEqHtBEI0TRx3QmbyK5OxZbm\nBLlJA+dPoQKBgBRW7l40D505k/ucyWify2jxJgi60hS3hZ1y3WSZYArOx4k6E7xv\ndwXsrVWwLafYpBfgu4gFvWPytbOPmg3Wz2Z0hByGZrl2sfa1YvXPNT53Gll8E9MY\nGC+c1NWC/QFLpQVNieC//2/je6UYI+UlY0K6IdPKck6qFh7fA7aAYzvpAoGBALqC\nW9KtwXyCVZ8byzG2reOFI8PjgvaNok3rzryd2zRFpKK91mHOXdh9NBTSlAhAr24F\nL0hebiaN69KZKsP5VY97muN6gUFRFFL5E5iGN8Narqpai6iWP9u05WUCELf9nrP9\nqrrXRIICToD0DoBXOw7lPS/p0bjMukXlfQWZHTRBAoGAAZQuADivxizng1Mg7+eC\nnI9cw9wuYSrtRSANc8AFQrHp6xgTHxpztMXEvykXLVvhucPbA27Kknhp4rj9c8Bz\nbhxNY95sACWso14hEKMRx9PynvhA82eUgBf+F8JNrgjwPY6qwasT8JprvaACb3tZ\nYKPjE1GlkabjoQI/jcbZFEI=\n-----END PRIVATE KEY-----\n"}
[debug] [2025-12-30T01:47:26.828Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/token_uri 200
[debug] [2025-12-30T01:47:26.828Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/token_uri {"name":"projects/recurr-app/configs/google/variables/service_account/token_uri","updateTime":"2025-12-30T01:45:58.563062680Z","text":"https://oauth2.googleapis.com/token"}
[debug] [2025-12-30T01:47:26.828Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/private_key_id 200
[debug] [2025-12-30T01:47:26.828Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/private_key_id {"name":"projects/recurr-app/configs/google/variables/service_account/private_key_id","updateTime":"2025-12-30T01:45:58.594635249Z","text":"e6180701c4a68c882c30535111cf0d9698227303"}
[debug] [2025-12-30T01:47:27.092Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/project_id 200
[debug] [2025-12-30T01:47:27.092Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/recurr-app/configs/google/variables/service_account/project_id {"name":"projects/recurr-app/configs/google/variables/service_account/project_id","updateTime":"2025-12-30T01:45:55.832185696Z","text":"recurr-482721"}
[debug] [2025-12-30T01:47:27.093Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2025-12-30T01:47:27.786Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "serve": "npm run build && firebase emulators:start --only functions",
    "deploy": "firebase deploy --only functions"
  },
  "engines": {
    "node": ">=22"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^4.5.0",
    "googleapis": "^130.0.0"
  },
  "devDependencies": {
    "typescript": "^5.3.0"
  },
  "private": true
}
[debug] [2025-12-30T01:47:27.786Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[info] i  functions: You are using a version of firebase-functions SDK (4.9.0) that does not have support for the newest Firebase Extensions features. Please update firebase-functions SDK to >=5.1.0 to use them correctly 
[debug] [2025-12-30T01:47:27.787Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-12-30T01:47:27.793Z] Found firebase-functions binary at '/Users/edufocal/Desktop/projects/recurr/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8051

[debug] [2025-12-30T01:47:28.637Z] Got response from /__/functions.yaml {"endpoints":{"validateAndroidPurchase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"validateAndroidPurchase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/edufocal/Desktop/projects/recurr/functions (39.69 KB) for uploading 
[debug] [2025-12-30T01:47:32.696Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:32.696Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:32.696Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/recurr-app/locations/-/functions [none]
[debug] [2025-12-30T01:47:33.587Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/recurr-app/locations/-/functions 200
[debug] [2025-12-30T01:47:33.587Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/recurr-app/locations/-/functions {}
[debug] [2025-12-30T01:47:33.588Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:33.588Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:33.589Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/recurr-app/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-12-30T01:47:34.109Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/recurr-app/locations/-/functions 200
[debug] [2025-12-30T01:47:34.109Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/recurr-app/locations/-/functions {}
[debug] [2025-12-30T01:47:34.132Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:34.132Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:34.132Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/recurr-app [none]
[debug] [2025-12-30T01:47:34.395Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/recurr-app 200
[debug] [2025-12-30T01:47:34.395Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/recurr-app {"projectNumber":"845079285876","projectId":"recurr-app","lifecycleState":"ACTIVE","name":"recurr-app","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-12-27T04:26:58.152857Z"}
[debug] [2025-12-30T01:47:34.398Z] [functions] found 1 new HTTP functions, testing setIamPolicy permission...
[debug] [2025-12-30T01:47:34.398Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:34.398Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:34.398Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/recurr-app:testIamPermissions [none]
[debug] [2025-12-30T01:47:34.398Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/recurr-app:testIamPermissions x-goog-quota-user=projects/recurr-app
[debug] [2025-12-30T01:47:34.399Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/recurr-app:testIamPermissions {"permissions":["cloudfunctions.functions.setIamPolicy"]}
[debug] [2025-12-30T01:47:34.494Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/recurr-app:testIamPermissions 200
[debug] [2025-12-30T01:47:34.495Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/recurr-app:testIamPermissions {"permissions":["cloudfunctions.functions.setIamPolicy"]}
[debug] [2025-12-30T01:47:34.495Z] [functions] found setIamPolicy permission, proceeding with deploy
[debug] [2025-12-30T01:47:34.503Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:34.503Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:34.503Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/recurr-app/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-12-30T01:47:34.504Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/recurr-app/locations/us-central1/functions:generateUploadUrl {}
[debug] [2025-12-30T01:47:35.201Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/recurr-app/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-12-30T01:47:35.201Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/recurr-app/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-483071999094.us-central1.cloudfunctions.appspot.com/e6260699-df84-4c0f-8bef-d2a54c939d12.zip?GoogleAccessId=service-845079285876@gcf-admin-robot.iam.gserviceaccount.com&Expires=1767061055&Signature=Mali6zniPrSrV99HqC623S60ZMJudgiKbERTPDIUcz46N9j8lDR96%2FgY2xxH26PBbnX5S1TOQ2KZtz62NB1oOcoYwbas6DnZkLyp6GIAnTBJUuPgSSwyM2doZjLzoTIcvtnIhoCLcwdfkiyh85YYTHHNB8ZsIJVvb55dGnlTtGlmW6b65YJeZBooMsU37jI2AypocyY6hCpLJvHs4AZwKNfKpeYnio0gAaJDPSxbACZIwkWcY39xbB6LQea%2BEws%2FgRlMuzBUYBc7NaFd5Ylhw7Cm378kYx75RHZomPQ22d%2FZ8Rfh1ySvmpTAD5JmORq73aMuAxm7UNedkuC76MihwQ%3D%3D"}
[debug] [2025-12-30T01:47:35.204Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-483071999094.us-central1.cloudfunctions.appspot.com/e6260699-df84-4c0f-8bef-d2a54c939d12.zip GoogleAccessId=service-845079285876%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1767061055&Signature=Mali6zniPrSrV99HqC623S60ZMJudgiKbERTPDIUcz46N9j8lDR96%2FgY2xxH26PBbnX5S1TOQ2KZtz62NB1oOcoYwbas6DnZkLyp6GIAnTBJUuPgSSwyM2doZjLzoTIcvtnIhoCLcwdfkiyh85YYTHHNB8ZsIJVvb55dGnlTtGlmW6b65YJeZBooMsU37jI2AypocyY6hCpLJvHs4AZwKNfKpeYnio0gAaJDPSxbACZIwkWcY39xbB6LQea%2BEws%2FgRlMuzBUYBc7NaFd5Ylhw7Cm378kYx75RHZomPQ22d%2FZ8Rfh1ySvmpTAD5JmORq73aMuAxm7UNedkuC76MihwQ%3D%3D
[debug] [2025-12-30T01:47:35.204Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-483071999094.us-central1.cloudfunctions.appspot.com/e6260699-df84-4c0f-8bef-d2a54c939d12.zip [stream]
[debug] [2025-12-30T01:47:35.640Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-483071999094.us-central1.cloudfunctions.appspot.com/e6260699-df84-4c0f-8bef-d2a54c939d12.zip 200
[debug] [2025-12-30T01:47:35.641Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-483071999094.us-central1.cloudfunctions.appspot.com/e6260699-df84-4c0f-8bef-d2a54c939d12.zip [omitted]
[info] ✔  functions: functions source uploaded successfully 
[info] i  functions: creating Node.js 22 (1st Gen) function validateAndroidPurchase(us-central1)... 
[debug] [2025-12-30T01:47:35.648Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:35.649Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:35.649Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/recurr-app/locations/us-central1/functions [none]
[debug] [2025-12-30T01:47:35.649Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/recurr-app/locations/us-central1/functions {"name":"projects/recurr-app/locations/us-central1/functions/validateAndroidPurchase","sourceUploadUrl":"https://storage.googleapis.com/uploads-483071999094.us-central1.cloudfunctions.appspot.com/e6260699-df84-4c0f-8bef-d2a54c939d12.zip?GoogleAccessId=service-845079285876@gcf-admin-robot.iam.gserviceaccount.com&Expires=1767061055&Signature=Mali6zniPrSrV99HqC623S60ZMJudgiKbERTPDIUcz46N9j8lDR96%2FgY2xxH26PBbnX5S1TOQ2KZtz62NB1oOcoYwbas6DnZkLyp6GIAnTBJUuPgSSwyM2doZjLzoTIcvtnIhoCLcwdfkiyh85YYTHHNB8ZsIJVvb55dGnlTtGlmW6b65YJeZBooMsU37jI2AypocyY6hCpLJvHs4AZwKNfKpeYnio0gAaJDPSxbACZIwkWcY39xbB6LQea%2BEws%2FgRlMuzBUYBc7NaFd5Ylhw7Cm378kYx75RHZomPQ22d%2FZ8Rfh1ySvmpTAD5JmORq73aMuAxm7UNedkuC76MihwQ%3D%3D","entryPoint":"validateAndroidPurchase","runtime":"nodejs22","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"42efcebc50dbb4757ebfb2cc74674fd81c96d083"},"httpsTrigger":{"securityLevel":"SECURE_ALWAYS"},"minInstances":null,"maxInstances":null,"ingressSettings":null,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"recurr-app\",\"storageBucket\":\"recurr-app.firebasestorage.app\"}","GCLOUD_PROJECT":"recurr-app","EVENTARC_CLOUD_EVENT_SOURCE":"projects/recurr-app/locations/us-central1/functions/validateAndroidPurchase"},"serviceAccountEmail":null,"availableMemoryMb":null,"timeout":null,"vpcConnector":null,"vpcConnectorEgressSettings":null,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2025-12-30T01:47:36.250Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/recurr-app/locations/us-central1/functions 403
[debug] [2025-12-30T01:47:36.250Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/recurr-app/locations/us-central1/functions {"error":{"code":403,"message":"Failed to create 1st Gen function projects/recurr-app/locations/us-central1/functions/validateAndroidPurchase: Unable to retrieve the repository metadata for projects/recurr-app/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] ⚠  functions: failed to create function projects/recurr-app/locations/us-central1/functions/validateAndroidPurchase 
[error] Failed to create function projects/recurr-app/locations/us-central1/functions/validateAndroidPurchase
[debug] [2025-12-30T01:47:36.254Z] Total Function Deployment time: 607
[debug] [2025-12-30T01:47:36.254Z] 1 Functions Deployed
[debug] [2025-12-30T01:47:36.254Z] 1 Functions Errored
[debug] [2025-12-30T01:47:36.254Z] 0 Function Deployments Aborted
[debug] [2025-12-30T01:47:36.254Z] Average Function Deployment time: 606
[info] 
[info] Functions deploy had errors with the following functions:
	validateAndroidPurchase(us-central1)
[debug] [2025-12-30T01:47:36.255Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[debug] [2025-12-30T01:47:36.256Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:36.256Z] Checked if tokens are valid: true, expires at: 1767062752211
[debug] [2025-12-30T01:47:36.256Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/recurr-app/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-12-30T01:47:36.763Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/recurr-app/locations/us-central1/repositories/gcf-artifacts 404
[debug] [2025-12-30T01:47:36.764Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/recurr-app/locations/us-central1/repositories/gcf-artifacts {"error":{"code":404,"message":"Requested entity was not found.","status":"NOT_FOUND"}}
[debug] [2025-12-30T01:47:36.764Z] Failed to check artifact cleanup policy for region us-central1: Request to https://artifactregistry.googleapis.com/v1/projects/recurr-app/locations/us-central1/repositories/gcf-artifacts had HTTP Error: 404, Requested entity was not found. {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":404,"message":"Requested entity was not found.","status":"NOT_FOUND"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://artifactregistry.googleapis.com/v1/projects/recurr-app/locations/us-central1/repositories/gcf-artifacts had HTTP Error: 404, Requested entity was not found.","status":404}
[debug] [2025-12-30T01:47:36.765Z] Functions deploy failed.
[debug] [2025-12-30T01:47:36.765Z] {
  "endpoint": {
    "id": "validateAndroidPurchase",
    "project": "recurr-app",
    "region": "us-central1",
    "entryPoint": "validateAndroidPurchase",
    "platform": "gcfv1",
    "runtime": "nodejs22",
    "httpsTrigger": {},
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"recurr-app\",\"storageBucket\":\"recurr-app.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "recurr-app",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/recurr-app/locations/us-central1/functions/validateAndroidPurchase"
    },
    "codebase": "default",
    "targetedByOnly": false,
    "hash": "42efcebc50dbb4757ebfb2cc74674fd81c96d083",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/recurr-app/locations/us-central1/functions/validateAndroidPurchase"
    },
    "exit": 1,
    "message": "Failed to create function projects/recurr-app/locations/us-central1/functions/validateAndroidPurchase",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Failed to create 1st Gen function projects/recurr-app/locations/us-central1/functions/validateAndroidPurchase: Unable to retrieve the repository metadata for projects/recurr-app/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "Request to https://cloudfunctions.googleapis.com/v1/projects/recurr-app/locations/us-central1/functions had HTTP Error: 403, Failed to create 1st Gen function projects/recurr-app/locations/us-central1/functions/validateAndroidPurchase: Unable to retrieve the repository metadata for projects/recurr-app/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2025-12-30T01:47:36.767Z] Error: Failed to create function validateAndroidPurchase in region us-central1
    at /Users/edufocal/.nvm/versions/node/v24.0.2/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:52:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Fabricator.createV1Function (/Users/edufocal/.nvm/versions/node/v24.0.2/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:194:32)
    at async Fabricator.createEndpoint (/Users/edufocal/.nvm/versions/node/v24.0.2/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:134:13)
    at async handle (/Users/edufocal/.nvm/versions/node/v24.0.2/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:89:17)
[error] 
[error] Error: There was an error deploying functions
